const n=JSON.parse(`{"key":"v-563d1ad2","path":"/views/DevLog/Web/javascript/Snippet/loadjs.html","title":"loadjs","lang":"zh-CN","frontmatter":{"title":"loadjs","icon":"page","order":1,"author":"admin","date":"2023-05-04T00:00:00.000Z","description":"常用函数：loadjs 动态加载JS文件 版本1：Promise // definition function loadjs(files, done = null) { const head = document.querySelector('head'); Promise.all(files.map((file) =&gt; { return new Promise((resolve) =&gt; { const s = document.createElement('script'); s.type = \\"text/javascript\\"; s.async = true; s.src = file; s.addEventListener('load', (e) =&gt; resolve(), false); head.appendChild(s); }); })).then(done) } // usage loadjs(['aaa.js','bbb.js'],()=&gt;{ // loaded done. })","head":[["meta",{"property":"og:url","content":"https://mpbug.gitee.io/views/DevLog/Web/javascript/Snippet/loadjs.html"}],["meta",{"property":"og:site_name","content":"魔法Bug"}],["meta",{"property":"og:title","content":"loadjs"}],["meta",{"property":"og:description","content":"常用函数：loadjs 动态加载JS文件 版本1：Promise // definition function loadjs(files, done = null) { const head = document.querySelector('head'); Promise.all(files.map((file) =&gt; { return new Promise((resolve) =&gt; { const s = document.createElement('script'); s.type = \\"text/javascript\\"; s.async = true; s.src = file; s.addEventListener('load', (e) =&gt; resolve(), false); head.appendChild(s); }); })).then(done) } // usage loadjs(['aaa.js','bbb.js'],()=&gt;{ // loaded done. })"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"admin"}],["meta",{"property":"article:published_time","content":"2023-05-04T00:00:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"loadjs\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-05-04T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"admin\\"}]}"]]},"headers":[{"level":2,"title":"常用函数：loadjs 动态加载JS文件","slug":"常用函数-loadjs-动态加载js文件","link":"#常用函数-loadjs-动态加载js文件","children":[{"level":3,"title":"版本1：Promise","slug":"版本1-promise","link":"#版本1-promise","children":[]},{"level":3,"title":"版本2：封装","slug":"版本2-封装","link":"#版本2-封装","children":[]}]}],"git":{},"readingTime":{"minutes":0.91,"words":274},"filePathRelative":"views/DevLog/Web/javascript/Snippet/loadjs.md","localizedDate":"2023年5月4日","excerpt":"<h2> 常用函数：loadjs 动态加载JS文件</h2>\\n<h3> 版本1：Promise</h3>\\n<div class=\\"language-javascript line-numbers-mode\\" data-ext=\\"js\\"><pre class=\\"language-javascript\\"><code><span class=\\"token comment\\">// definition</span>\\n<span class=\\"token keyword\\">function</span> <span class=\\"token function\\">loadjs</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">files<span class=\\"token punctuation\\">,</span> done <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">null</span></span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">const</span> head <span class=\\"token operator\\">=</span> document<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">querySelector</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'head'</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n    Promise<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">all</span><span class=\\"token punctuation\\">(</span>files<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">map</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">file</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token keyword\\">new</span> <span class=\\"token class-name\\">Promise</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">resolve</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token keyword\\">const</span> s <span class=\\"token operator\\">=</span> document<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">createElement</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'script'</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n            s<span class=\\"token punctuation\\">.</span>type <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"text/javascript\\"</span><span class=\\"token punctuation\\">;</span> s<span class=\\"token punctuation\\">.</span>async <span class=\\"token operator\\">=</span> <span class=\\"token boolean\\">true</span><span class=\\"token punctuation\\">;</span> s<span class=\\"token punctuation\\">.</span>src <span class=\\"token operator\\">=</span> file<span class=\\"token punctuation\\">;</span>\\n            s<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">addEventListener</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'load'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">e</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token function\\">resolve</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token boolean\\">false</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n            head<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">appendChild</span><span class=\\"token punctuation\\">(</span>s<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">then</span><span class=\\"token punctuation\\">(</span>done<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\n<span class=\\"token comment\\">// usage</span>\\n<span class=\\"token function\\">loadjs</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">[</span><span class=\\"token string\\">'aaa.js'</span><span class=\\"token punctuation\\">,</span><span class=\\"token string\\">'bbb.js'</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token operator\\">=&gt;</span><span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token comment\\">// loaded done.</span>\\n<span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span>\\n\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}`);export{n as data};
