import{_ as r,X as l,Y as i,Z as e,$ as o,a0 as d,a5 as h,a4 as t,E as a}from"./framework-d8252107.js";const _={},p=t('<p>在深入源码前，让我们先建立<code>更新机制</code>的<code>心智模型</code>。</p><p>在后面两节讲解源码时，我们会将代码与<code>心智模型</code>联系上，方便你更好理解。</p><h2 id="同步更新的react" tabindex="-1"><a class="header-anchor" href="#同步更新的react" aria-hidden="true">#</a> 同步更新的React</h2><p>我们可以将<code>更新机制</code>类比<code>代码版本控制</code>。</p><p>在没有<code>代码版本控制</code>前，我们在代码中逐步叠加功能。一切看起来井然有序，直到我们遇到了一个紧急线上bug（红色节点）。</p>',5),u=["src"],m=e("p",null,"为了修复这个bug，我们需要首先将之前的代码提交。",-1),g=e("code",null,"React",-1),R=e("code",null,"ReactDOM.render",-1),f=e("code",null,"更新状态",-1),B=t('<p>即没有<code>优先级</code>概念，<code>高优更新</code>（红色节点）需要排在其他<code>更新</code>后面执行。</p><h2 id="并发更新的react" tabindex="-1"><a class="header-anchor" href="#并发更新的react" aria-hidden="true">#</a> 并发更新的React</h2><p>当有了<code>代码版本控制</code>，有紧急线上bug需要修复时，我们暂存当前分支的修改，在<code>master分支</code>修复bug并紧急上线。</p>',3),b=["src"],E=e("p",null,[o("bug修复上线后通过"),e("code",null,"git rebase"),o("命令和"),e("code",null,"开发分支"),o("连接上。"),e("code",null,"开发分支"),o("基于"),e("code",null,"修复bug的版本"),o("继续开发。")],-1),k=["src"],w=t('<p>在<code>React</code>中，通过<code>ReactDOM.createBlockingRoot</code>和<code>ReactDOM.createRoot</code>创建的应用会采用<code>并发</code>的方式<code>更新状态</code>。</p><p><code>高优更新</code>（红色节点）中断正在进行中的<code>低优更新</code>（蓝色节点），先完成<code>render - commit流程</code>。</p><p>待<code>高优更新</code>完成后，<code>低优更新</code>基于<code>高优更新</code>的结果<code>重新更新</code>。</p><p>接下来两节我们会从源码角度讲解这套<code>并发更新</code>是如何实现的。</p><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料" aria-hidden="true">#</a> 参考资料</h2>',5),x={href:"https://www.youtube.com/watch?v=v6iR3Zk4oDY",target:"_blank",rel:"noopener noreferrer"},D=e("code",null,"外网",-1),v=e("code",null,"英文",-1);function L(c,M){const n=a("RouterLink"),s=a("ExternalLinkIcon");return l(),i("div",null,[p,e("img",{src:c.$withBase("/img/git1.png"),alt:"流程1"},null,8,u),m,e("p",null,[o("在"),g,o("中，所有通过"),R,o("创建的应用（其他创建应用的方式参考"),d(n,{to:"/views/Books/Front-end/JustReact/state/reactdom.html#react%E7%9A%84%E5%85%B6%E4%BB%96%E5%85%A5%E5%8F%A3%E5%87%BD%E6%95%B0"},{default:h(()=>[o("ReactDOM.render一节")]),_:1}),o("）都是通过类似的方式"),f,o("。")]),B,e("img",{src:c.$withBase("/img/git2.png"),alt:"流程2"},null,8,b),E,e("img",{src:c.$withBase("/img/git3.png"),alt:"流程3"},null,8,k),w,e("p",null,[e("a",x,[D,o(),v,o(" React Core Team Dan介绍React未来发展方向"),d(s)])])])}const O=r(_,[["render",L],["__file","mental.html.vue"]]);export{O as default};
